{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions, mapState } from 'vuex';\nexport default {\n  name: \"InterportEditFinalReport\",\n  title: \"Interport - Edit Final Report\",\n\n  data() {\n    return {\n      divs: [],\n      index: 0,\n      errors: {}\n    };\n  },\n\n  computed: { ...mapState({\n      editFinalReportData: state => state.final_report.final_report,\n      clients: state => state.final_report.clients,\n      applicants: state => state.final_report.applicants,\n      message: state => state.final_report.success_message\n    })\n  },\n\n  mounted() {\n    this.getEditFinalReport(this.$route.params.final_report_id);\n    this.getAllClients();\n    this.getApplicant(this.$route.params.survey_id);\n  },\n\n  methods: { ...mapActions({\n      getEditFinalReport: 'final_report/edit_final_report',\n      getAllClients: 'final_report/get_client',\n      getApplicant: 'final_report/get_applicant'\n    }),\n\n    addRow() {\n      this.divs.push({\n        id: this.index,\n        name: 'div' + this.index,\n        marking_on_the_label_packages: ''\n      });\n      this.index++;\n    },\n\n    deletedRow(id) {\n      this.divs = this.divs.filter(d => d.id !== id);\n    },\n\n    editFinalReport: async function () {\n      try {\n        let survey_id = this.$route.params.survey_id;\n        let id = this.$route.params.final_report_id;\n        let formData = new FormData();\n        formData.append('survey_id', survey_id);\n        formData.append('applicant', this.editFinalReportData.applicant);\n        formData.append('method_of_discharge', this.editFinalReportData.method_of_discharge);\n        formData.append('nature_of_packing', this.editFinalReportData.nature_of_packing);\n        formData.append('condition_of_remaining_packages', this.editFinalReportData.condition_of_remaining_packages);\n        formData.append('note', this.editFinalReportData.note);\n        formData.append('remarks', this.editFinalReportData.remarks);\n        formData.append('signature', this.editFinalReportData.signature);\n        this.editFinalReportData.makinglable.forEach(item => formData.append('marking_label_id[]', item.id));\n        this.editFinalReportData.makinglable.forEach(item => formData.append('marking_label_packages[]', item.marking_on_the_label_packages));\n        this.divs.forEach(item => formData.append('marking_on_the_label_packages[]', item.marking_on_the_label_packages));\n        formData.append('_method', 'PUT');\n        await this.$store.dispatch('final_report/update_final_report', {\n          id: id,\n          data: formData\n        }).then(() => {\n          this.$swal.fire({\n            toast: true,\n            position: \"top-end\",\n            icon: \"success\",\n            title: this.message,\n            showConfirmButton: false,\n            timer: 1500\n          });\n          this.finalReportData = {};\n        }).catch(err => {\n          console.log(err);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoIA;AAEA;EACAA,gCADA;EAEAC,sCAFA;;EAIAC;IACA;MACAC,QADA;MAGAC,QAHA;MAKAC;IALA;EAOA,CAZA;;EAcAC,YACA;MACAC,6DADA;MAEAC,4CAFA;MAGAC,kDAHA;MAIAC;IAJA;EADA,CAdA;;EAuBAC;IACA;IACA;IACA;EACA,CA3BA;;EA6BAC,WACA;MACAC,oDADA;MAEAC,wCAFA;MAGAC;IAHA,EADA;;IAOAC;MACA;QACAC,cADA;QAEAjB,wBAFA;QAGAkB;MAHA;MAKA;IACA,CAdA;;IAgBAC;MACA;IACA,CAlBA;;IAoBAC;MACA;QACA;QAEA;QAEA;QAEAC;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QAEA;QACA;QAEA;QAEAA;QAEA;UAAAJ;UAAAf;QAAA;UACA;YACAoB,WADA;YAEAC,mBAFA;YAGAC,eAHA;YAIAvB,mBAJA;YAKAwB,wBALA;YAMAC;UANA;UASA;QACA,CAXA,EAWAC,KAXA,CAWAC;UACAC;QACA,CAbA;MAcA,CArCA,CAqCA;QACAA;MACA;IACA;EA7DA;AA7BA","names":["name","title","data","divs","index","errors","computed","editFinalReportData","clients","applicants","message","mounted","methods","getEditFinalReport","getAllClients","getApplicant","addRow","id","marking_on_the_label_packages","deletedRow","editFinalReport","formData","toast","position","icon","showConfirmButton","timer","catch","err","console"],"sourceRoot":"src/views/admin/report/final_report","sources":["EditFinalReport.vue"],"sourcesContent":["<template>\r\n    <div id=\"edit_final_report\">\r\n        <div class=\"card\">\r\n            <div class=\"container\">\r\n                <h2>Edit Final Report</h2>\r\n\r\n                <form v-on:submit.prevent=\"editFinalReport\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"applicant\">Applicant</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <select name=\"applicant\" id=\"applicant\" v-model=\"editFinalReportData.applicant\" class=\"box\">\r\n                                <option value=\"\">Select Applicant</option>\r\n                                <option :value=\"1\">Client</option>\r\n                                <option :value=\"2\">Consignee</option>\r\n                                <option :value=\"3\">Cnf</option>\r\n                                <option :value=\"4\">Cnf + Consignee</option>\r\n                                <option :value=\"5\">Shipowner_name</option>\r\n                                <option :value=\"6\">Charterer_name</option>\r\n                                <option :value=\"7\">Iml Client</option>\r\n                            </select>\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"dname\">Method Of Discharge</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <input type=\"text\" name=\"method_of_discharge\" v-model=\"editFinalReportData.method_of_discharge\" class=\"box\">\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"dname\">Nature Of Packing</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <input type=\"text\" name=\"nature_of_packing\" v-model=\"editFinalReportData.nature_of_packing\" class=\"box\">\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"dname\">Conditions of remaining packages</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <input type=\"text\" name=\"condition_of_remaining_packages\"\r\n                                v-model=\"editFinalReportData.condition_of_remaining_packages\" class=\"box\">\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"dname\">Note</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <textarea cols=\"10\" name=\"note\" v-model=\"editFinalReportData.note\" class=\"box\"></textarea>\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"dname\">Remarks</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <input type=\"text\" name=\"remarks\" v-model=\"editFinalReportData.remarks\" class=\"box\">\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\" v-for=\"fmak in editFinalReportData.makinglable\" :key=\"fmak.id\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"dname\">marking_on_the_label_packages</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <input type=\"text\" name=\"marking_label_packages[]\" v-model=\"fmak.marking_on_the_label_packages\">\r\n                            <input type=\"hidden\" name=\"marking_label_id[]\" v-model=\"fmak.id\">\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\" v-for=\"div in divs\" :key=\"div.id\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"dname\">marking_on_the_label_packages</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <input type=\"text\" name=\"marking_on_the_label_packages\"\r\n                                v-model=\"div.marking_on_the_label_packages\">\r\n                            <button @click=\"deletedRow(div.id)\" class=\"delete_row_btn\">Delete</button>\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div @click=\"addRow()\" class=\"add_row_btn\">Add Marking Label Packages</div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <div class=\"col-25\">\r\n                            <label for=\"applicant\">Signature</label>\r\n                        </div>\r\n                        <div class=\"col-75\">\r\n                            <select name=\"signature\" id=\"signature\" v-model=\"editFinalReportData.signature\" class=\"box\">\r\n                                <option value=\"\">Select signature</option>\r\n                                <option :value=\"client.name\" v-for=\"client in clients\" :key=\"client.id\">{{\r\n                                    client.name\r\n                                }}</option>\r\n                            </select>\r\n                            <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"row\">\r\n                        <input type=\"submit\" value=\"Submit\" />\r\n                        <router-link :to=\"`/dashboard/survey/${this.$route.params.survey_id}`\" style=\"float: right\">\r\n                            <input type=\"button\" value=\"Back\" class=\"back-btn\" />\r\n                        </router-link>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from 'vuex';\r\n\r\nexport default {\r\n    name: \"InterportEditFinalReport\",\r\n    title: \"Interport - Edit Final Report\",\r\n\r\n    data() {\r\n        return {\r\n            divs: [],\r\n\r\n            index: 0,\r\n\r\n            errors: {}\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        ...mapState({\r\n            editFinalReportData: state => state.final_report.final_report,\r\n            clients: state => state.final_report.clients,\r\n            applicants: state => state.final_report.applicants,\r\n            message: state => state.final_report.success_message\r\n        })\r\n    },\r\n\r\n    mounted(){\r\n        this.getEditFinalReport(this.$route.params.final_report_id);\r\n        this.getAllClients();\r\n        this.getApplicant(this.$route.params.survey_id)\r\n    },\r\n\r\n    methods: {\r\n        ...mapActions({\r\n            getEditFinalReport: 'final_report/edit_final_report',\r\n            getAllClients: 'final_report/get_client',\r\n            getApplicant: 'final_report/get_applicant'\r\n        }),\r\n\r\n        addRow() {\r\n                this.divs.push({\r\n                    id: this.index,\r\n                    name: 'div' + this.index,\r\n                    marking_on_the_label_packages: '',\r\n                });\r\n                this.index++;\r\n            },\r\n\r\n        deletedRow(id) {\r\n            this.divs = this.divs.filter(d => d.id !== id);\r\n        },\r\n\r\n        editFinalReport: async function(){\r\n            try {\r\n                let survey_id = this.$route.params.survey_id;\r\n\r\n                let id = this.$route.params.final_report_id;\r\n\r\n                let formData = new FormData();\r\n\r\n                formData.append('survey_id', survey_id);\r\n                formData.append('applicant', this.editFinalReportData.applicant);\r\n                formData.append('method_of_discharge', this.editFinalReportData.method_of_discharge);\r\n                formData.append('nature_of_packing', this.editFinalReportData.nature_of_packing);\r\n                formData.append('condition_of_remaining_packages', this.editFinalReportData.condition_of_remaining_packages);\r\n                formData.append('note', this.editFinalReportData.note);\r\n                formData.append('remarks', this.editFinalReportData.remarks);\r\n                formData.append('signature', this.editFinalReportData.signature);\r\n\r\n                this.editFinalReportData.makinglable.forEach(item => formData.append('marking_label_id[]', item.id));\r\n                this.editFinalReportData.makinglable.forEach(item => formData.append('marking_label_packages[]', item.marking_on_the_label_packages));\r\n\r\n                this.divs.forEach(item => formData.append('marking_on_the_label_packages[]', item.marking_on_the_label_packages));\r\n\r\n                formData.append('_method', 'PUT')\r\n\r\n                await this.$store.dispatch('final_report/update_final_report', {id:id, data:formData}).then(() => {\r\n                    this.$swal.fire({\r\n                      toast: true,\r\n                      position: \"top-end\",\r\n                      icon: \"success\",\r\n                      title: this.message,\r\n                      showConfirmButton: false,\r\n                      timer: 1500,\r\n                    });\r\n\r\n                    this.finalReportData = {};\r\n                  }).catch((err) => {\r\n                    console.log(err);\r\n                  });\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#edit_final_report {\r\n    padding: 0px 5px 0px 5px;\r\n    margin: 0px 15px 0px 15px;\r\n  }\r\n.box{\r\n    width: 100%;\r\n}\r\n\r\n.file_upload{\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    padding: 5px;\r\n    margin: 5px;\r\n    border-radius: 4px;\r\n}\r\n\r\nimg{\r\n    width: 20% !important;\r\n}\r\n\r\nselect {\r\n    width: 70%;\r\n    height: 38px;\r\n    box-shadow: 0 2px 1px 0 rgb(0 0 0 / 20%), 0 2px 15px 0 rgb(0 0 0 / 19%);\r\n    padding-left: 12px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    resize: vertical;\r\n}\r\n\r\n.add_row_btn{\r\n   \r\n    background-color: yellowgreen;\r\n    color: white;\r\n    padding: 12px 20px;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    float: left;\r\n    margin-left: 5px;\r\n}\r\n\r\n.delete_row_btn{\r\n    background-color: red;\r\n    color: white;\r\n    padding: 12px 20px;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    float: right;\r\n    margin-left: 5px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}