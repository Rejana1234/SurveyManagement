{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions, mapState } from 'vuex';\nexport default {\n  name: \"InterportEditOtherReport\",\n  title: \"Interport - Edit Other Report\",\n\n  data() {\n    return {\n      report_file: '',\n      errors: {}\n    };\n  },\n\n  computed: { ...mapState({\n      editOthertData: state => state.other_report.other_report,\n      message: state => state.other_report.success_message\n    })\n  },\n\n  mounted() {\n    this.getEditOtherReport(this.$route.params.other_report_id);\n  },\n\n  methods: { ...mapActions({\n      getEditOtherReport: 'other_report/edit_other'\n    }),\n    attachImage: function () {\n      //to use some file todo\n      this.report_file = this.$refs.newReportFile.files[0];\n      let reader = new FileReader();\n      reader.readAsDataURL(this.report_file);\n    },\n    editOtherReport: async function () {\n      try {\n        let survey_id = this.$route.params.survey_id;\n        let id = this.$route.params.other_report_id;\n        let formData = new FormData();\n        formData.append('survey_id', survey_id);\n        formData.append('name', this.editOthertData.name);\n        formData.append('report_file', this.report_file);\n        formData.append('_method', 'PUT');\n        await this.$store.dispatch('other_report/update_other_report', {\n          id: id,\n          data: formData\n        }).then(() => {\n          this.$swal.fire({\n            toast: true,\n            position: \"top-end\",\n            icon: \"success\",\n            title: this.message,\n            showConfirmButton: false,\n            timer: 1500\n          });\n          this.getEditOtherReport(id);\n        }).catch(err => {\n          console.log(err);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AAEA;EACAA,gCADA;EAEAC,sCAFA;;EAIAC;IACA;MACAC,eADA;MAEAC;IAFA;EAIA,CATA;;EAYAC,YACA;MACAC,wDADA;MAEAC;IAFA;EADA,CAZA;;EAmBAC;IACA;EACA,CArBA;;EAwBAC,WACA;MACAC;IADA,EADA;IAKAC;MACA;MACA;MACA;MACAC;IACA,CAVA;IAYAC;MACA;QACA;QAEA;QAEA;QAEAC;QACAA;QACAA;QACAA;QAEA;UAAAC;UAAAb;QAAA;UACA;YACAc,WADA;YAEAC,mBAFA;YAGAC,eAHA;YAIAjB,mBAJA;YAKAkB,wBALA;YAMAC;UANA;UASA;QACA,CAXA,EAWAC,KAXA,CAWAC;UACAC;QACA,CAbA;MAcA,CA1BA,CA0BA;QACAA;MACA;IACA;EA1CA;AAxBA","names":["name","title","data","report_file","errors","computed","editOthertData","message","mounted","methods","getEditOtherReport","attachImage","reader","editOtherReport","formData","id","toast","position","icon","showConfirmButton","timer","catch","err","console"],"sourceRoot":"src/views/admin/report/other_report","sources":["EditOtherReport.vue"],"sourcesContent":["<template>\r\n    <div id=\"edit_other_report\">\r\n        <div class=\"card\">\r\n            <div class=\"container\">\r\n              <h2>Edit Other Report</h2>\r\n              <form v-on:submit.prevent=\"editOtherReport\">\r\n\r\n                <div class=\"row\">\r\n                  <div class=\"col-25\">\r\n                    <label for=\"dname\">Name</label>\r\n                  </div>\r\n                  <div class=\"col-75\">\r\n                    <input type=\"text\" name=\"name\" v-model=\"editOthertData.name\" class=\"box\" />\r\n                    <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                  </div>\r\n                </div>\r\n      \r\n               \r\n                <div class=\"row\">\r\n                  <div class=\"col-25\">\r\n                    <label for=\"applicant\">Report File Upload</label>\r\n                  </div>\r\n                  <div class=\"col-75\">\r\n                    <input type=\"file\" class=\"box file_upload\" name=\"report_file\" v-on:change=\"attachImage\" ref=\"newReportFile\">\r\n                    <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"row\">\r\n                    <iframe frameborder=\"5\" width=\"100px\" height=\"100px\" class=\"pdf\"></iframe>\r\n                </div>\r\n\r\n                <div class=\"row\">\r\n                  <input type=\"submit\" value=\"Submit\" />\r\n                  <router-link :to=\"`/dashboard/survey/${this.$route.params.survey_id}`\" style=\"float: right\">\r\n                    <input type=\"button\" value=\"Back\" class=\"back-btn\" />\r\n                  </router-link>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from 'vuex';\r\n\r\n    export default{\r\n        name: \"InterportEditOtherReport\",\r\n        title: \"Interport - Edit Other Report\",\r\n\r\n        data(){\r\n            return{\r\n                report_file: '',\r\n                errors: {}\r\n            }\r\n        },\r\n\r\n       \r\n        computed: {\r\n            ...mapState({\r\n                editOthertData: state => state.other_report.other_report,\r\n                message: state => state.other_report.success_message\r\n            })\r\n        },\r\n\r\n        mounted(){\r\n            this.getEditOtherReport(this.$route.params.other_report_id);\r\n        },\r\n\r\n\r\n        methods: {\r\n            ...mapActions({\r\n                getEditOtherReport: 'other_report/edit_other'\r\n            }),\r\n\r\n            attachImage: function(){\r\n                //to use some file todo\r\n                this.report_file = this.$refs.newReportFile.files[0];\r\n                let reader = new FileReader();\r\n                reader.readAsDataURL(this.report_file);\r\n            },\r\n\r\n            editOtherReport: async function(){\r\n                try {\r\n                    let survey_id = this.$route.params.survey_id;\r\n\r\n                    let id = this.$route.params.other_report_id;\r\n\r\n                    let formData = new FormData();\r\n\r\n                    formData.append('survey_id', survey_id);\r\n                    formData.append('name', this.editOthertData.name)\r\n                    formData.append('report_file', this.report_file)\r\n                    formData.append('_method', 'PUT')\r\n\r\n                    await this.$store.dispatch('other_report/update_other_report', {id:id, data:formData}).then(() => {\r\n                        this.$swal.fire({\r\n                            toast: true,\r\n                            position: \"top-end\",\r\n                            icon: \"success\",\r\n                            title: this.message,\r\n                            showConfirmButton: false,\r\n                            timer: 1500,\r\n                        });\r\n\r\n                        this.getEditOtherReport(id);\r\n                    }).catch((err) => {\r\n                        console.log(err);\r\n                    });\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n#edit_other_report{\r\n    padding: 0px 5px 0px 5px;\r\n    margin: 0px 15px 0px 15px;\r\n}\r\n\r\n    .box {\r\n        width: 100%;\r\n    }\r\n  \r\n  .file_upload {\r\n    border: 1px solid #ccc;\r\n    width: 100%;\r\n    padding: 5px;\r\n    margin: 5px;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .pdf{\r\n    border: 1px solid #000;\r\n    background-image: url('../../../../assets/pdf_icon_1.png');\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}