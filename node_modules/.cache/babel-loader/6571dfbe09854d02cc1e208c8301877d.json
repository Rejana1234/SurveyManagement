{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions, mapState } from \"vuex\";\nexport default {\n  name: \"InterportAddFinalReport\",\n  title: \"Interport - Add Final Report\",\n\n  data() {\n    return {\n      finalReportData: {\n        applicant: \"\",\n        method_of_discharge: \"\",\n        nature_of_packing: \"\",\n        condition_of_remaining_packages: \"\",\n        note: \"\",\n        remarks: \"\",\n        signature: \"\"\n      },\n      divs: [],\n      index: 0,\n      errors: {}\n    };\n  },\n\n  mounted() {\n    this.getAllClients();\n    this.getApplicant(this.$route.params.survey_id);\n  },\n\n  computed: { ...mapState({\n      clients: state => state.final_report.clients,\n      applicants: state => state.final_report.applicants,\n      consginee: state => state.final_report.consginee,\n      message: state => state.final_report.success_message\n    })\n  },\n  methods: { ...mapActions({\n      getAllClients: \"final_report/get_client\",\n      getApplicant: \"final_report/get_applicant\"\n    }),\n\n    addRow() {\n      this.divs.push({\n        id: this.index,\n        name: \"div\" + this.index,\n        marking_on_the_label_packages: \"\"\n      });\n      this.index++;\n    },\n\n    deletedRow(id) {\n      this.divs = this.divs.filter(d => d.id !== id);\n    },\n\n    addFinalReport: async function () {\n      try {\n        let survey_id = this.$route.params.survey_id;\n        let formData = new FormData();\n        formData.append(\"survey_id\", survey_id);\n        formData.append(\"applicant\", this.finalReportData.applicant);\n        formData.append(\"method_of_discharge\", this.finalReportData.method_of_discharge);\n        formData.append(\"nature_of_packing\", this.finalReportData.nature_of_packing);\n        formData.append(\"condition_of_remaining_packages\", this.finalReportData.condition_of_remaining_packages);\n        formData.append(\"note\", this.finalReportData.note);\n        formData.append(\"remarks\", this.finalReportData.remarks);\n        formData.append(\"signature\", this.finalReportData.signature);\n        this.divs.forEach(item => formData.append(\"marking_on_the_label_packages[]\", item.marking_on_the_label_packages));\n        await this.$store.dispatch(\"final_report/add_final_report\", formData).then(() => {\n          this.$swal.fire({\n            toast: true,\n            position: \"top-end\",\n            icon: \"success\",\n            title: this.message,\n            showConfirmButton: false,\n            timer: 1500\n          });\n          this.finalReportData = {};\n          this.$router.go(-1);\n        }).catch(err => {\n          console.log(err);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AAEA;EACAA,+BADA;EAEAC,qCAFA;;EAIAC;IACA;MACAC;QACAC,aADA;QAEAC,uBAFA;QAGAC,qBAHA;QAIAC,mCAJA;QAKAC,QALA;QAMAC,WANA;QAOAC;MAPA,CADA;MAWAC,QAXA;MAaAC,QAbA;MAeAC;IAfA;EAiBA,CAtBA;;EAwBAC;IACA;IACA;EACA,CA3BA;;EA6BAC,YACA;MACAC,4CADA;MAEAC,kDAFA;MAGAC,gDAHA;MAIAC;IAJA;EADA,CA7BA;EAsCAC,WACA;MACAC,wCADA;MAEAC;IAFA,EADA;;IAMAC;MACA;QACAC,cADA;QAEAxB,wBAFA;QAGAyB;MAHA;MAKA;IACA,CAbA;;IAeAC;MACA;IACA,CAjBA;;IAmBAC;MACA;QACA;QAEA;QAEAC;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;QAEA,0BACAA,sFADA;QAIA,kBACAC,QADA,CACA,+BADA,EACAD,QADA,EAEAE,IAFA,CAEA;UACA;YACAC,WADA;YAEAC,mBAFA;YAGAC,eAHA;YAIAhC,mBAJA;YAKAiC,wBALA;YAMAC;UANA;UASA;UACA;QACA,CAdA,EAeAC,KAfA,CAeAC;UACAC;QACA,CAjBA;MAkBA,CApCA,CAoCA;QACAA;MACA;IACA;EA3DA;AAtCA","names":["name","title","data","finalReportData","applicant","method_of_discharge","nature_of_packing","condition_of_remaining_packages","note","remarks","signature","divs","index","errors","mounted","computed","clients","applicants","consginee","message","methods","getAllClients","getApplicant","addRow","id","marking_on_the_label_packages","deletedRow","addFinalReport","formData","dispatch","then","toast","position","icon","showConfirmButton","timer","catch","err","console"],"sourceRoot":"src/views/admin/report/final_report","sources":["AddFinalReport.vue"],"sourcesContent":["<template>\r\n  <div id=\"add_final_report\">\r\n    <div class=\"card\">\r\n      <div class=\"container\">\r\n        <h2>Add Final Report</h2>\r\n        <form v-on:submit.prevent=\"addFinalReport\">\r\n          <div class=\"row\">\r\n            <div class=\"col-25\">\r\n              <label for=\"applicant\">Applicant</label>\r\n            </div>\r\n            <div class=\"col-75\">\r\n              <select name=\"applicant\" id=\"applicant\" v-model=\"finalReportData.applicant\" class=\"box\">\r\n                <option value=\"\">Select Applicant</option>\r\n                <option :value=\"1\">Client</option>\r\n                <option :value=\"2\">Consignee</option>\r\n                <option :value=\"3\">C_&_f</option>\r\n                <option :value=\"4\">C_&_f + Consignee</option>\r\n                <option :value=\"5\">Shipowner_name</option>\r\n                <option :value=\"6\">Charterer_name</option>\r\n                <option :value=\"7\">Iml Client</option>\r\n              </select>\r\n              <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-25\">\r\n              <label for=\"dname\">Method Of Discharge</label>\r\n            </div>\r\n            <div class=\"col-75\">\r\n              <input type=\"text\" name=\"method_of_discharge\" v-model=\"finalReportData.method_of_discharge\" class=\"box\" />\r\n              <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-25\">\r\n              <label for=\"dname\">Nature Of Packing</label>\r\n            </div>\r\n            <div class=\"col-75\">\r\n              <input type=\"text\" name=\"nature_of_packing\" v-model=\"finalReportData.nature_of_packing\" class=\"box\" />\r\n              <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-25\">\r\n              <label for=\"dname\">Conditions of remaining packages</label>\r\n            </div>\r\n            <div class=\"col-75\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"condition_of_remaining_packages\"\r\n                v-model=\"finalReportData.condition_of_remaining_packages\"\r\n                class=\"box\"\r\n              />\r\n              <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-25\">\r\n              <label for=\"dname\">Note</label>\r\n            </div>\r\n            <div class=\"col-75\">\r\n              <textarea cols=\"10\" name=\"note\" v-model=\"finalReportData.note\" class=\"box\"></textarea>\r\n              <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-25\">\r\n              <label for=\"dname\">Remarks</label>\r\n            </div>\r\n            <div class=\"col-75\">\r\n              <input type=\"text\" name=\"remarks\" v-model=\"finalReportData.remarks\" class=\"box\" />\r\n              <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\" v-for=\"div in divs\" :key=\"div.id\">\r\n            <div class=\"col-25\">\r\n              <label for=\"dname\">marking_on_the_label_packages</label>\r\n            </div>\r\n            <div class=\"col-75\">\r\n              <input type=\"text\" name=\"marking_on_the_label_packages\" v-model=\"div.marking_on_the_label_packages\" />\r\n              <button @click=\"deletedRow(div.id)\" class=\"delete_row_btn\">Delete</button>\r\n              <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n            </div>\r\n\r\n            <div></div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <div @click=\"addRow()\" class=\"add_row_btn\">Add Marking Label Packages</div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <div class=\"col-25\">\r\n              <label for=\"applicant\">Signature</label>\r\n            </div>\r\n            <div class=\"col-75\">\r\n              <select name=\"signature\" id=\"signature\" v-model=\"finalReportData.signature\" class=\"box\">\r\n                <option value=\"\">Select signature</option>\r\n                <option :value=\"client.name\" v-for=\"client in clients\" :key=\"client.id\">{{ client.name }}</option>\r\n              </select>\r\n              <span v-if=\"errors.name\" class=\"danger_text\">{{ errors.name[0] }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"row\">\r\n            <input type=\"submit\" value=\"Submit\" />\r\n            <router-link :to=\"`/dashboard/survey/${this.$route.params.survey_id}`\" style=\"float: right\">\r\n              <input type=\"button\" value=\"Back\" class=\"back-btn\" />\r\n            </router-link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapState } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"InterportAddFinalReport\",\r\n  title: \"Interport - Add Final Report\",\r\n\r\n  data() {\r\n    return {\r\n      finalReportData: {\r\n        applicant: \"\",\r\n        method_of_discharge: \"\",\r\n        nature_of_packing: \"\",\r\n        condition_of_remaining_packages: \"\",\r\n        note: \"\",\r\n        remarks: \"\",\r\n        signature: \"\",\r\n      },\r\n\r\n      divs: [],\r\n\r\n      index: 0,\r\n\r\n      errors: {},\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.getAllClients();\r\n    this.getApplicant(this.$route.params.survey_id);\r\n  },\r\n\r\n  computed: {\r\n    ...mapState({\r\n      clients: (state) => state.final_report.clients,\r\n      applicants: (state) => state.final_report.applicants,\r\n      consginee: (state) => state.final_report.consginee,\r\n      message: (state) => state.final_report.success_message,\r\n    }),\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions({\r\n      getAllClients: \"final_report/get_client\",\r\n      getApplicant: \"final_report/get_applicant\",\r\n    }),\r\n\r\n    addRow() {\r\n      this.divs.push({\r\n        id: this.index,\r\n        name: \"div\" + this.index,\r\n        marking_on_the_label_packages: \"\",\r\n      });\r\n      this.index++;\r\n    },\r\n\r\n    deletedRow(id) {\r\n      this.divs = this.divs.filter((d) => d.id !== id);\r\n    },\r\n\r\n    addFinalReport: async function () {\r\n      try {\r\n        let survey_id = this.$route.params.survey_id;\r\n\r\n        let formData = new FormData();\r\n\r\n        formData.append(\"survey_id\", survey_id);\r\n        formData.append(\"applicant\", this.finalReportData.applicant);\r\n        formData.append(\"method_of_discharge\", this.finalReportData.method_of_discharge);\r\n        formData.append(\"nature_of_packing\", this.finalReportData.nature_of_packing);\r\n        formData.append(\"condition_of_remaining_packages\", this.finalReportData.condition_of_remaining_packages);\r\n        formData.append(\"note\", this.finalReportData.note);\r\n        formData.append(\"remarks\", this.finalReportData.remarks);\r\n        formData.append(\"signature\", this.finalReportData.signature);\r\n\r\n        this.divs.forEach((item) =>\r\n          formData.append(\"marking_on_the_label_packages[]\", item.marking_on_the_label_packages)\r\n        );\r\n\r\n        await this.$store\r\n          .dispatch(\"final_report/add_final_report\", formData)\r\n          .then(() => {\r\n            this.$swal.fire({\r\n              toast: true,\r\n              position: \"top-end\",\r\n              icon: \"success\",\r\n              title: this.message,\r\n              showConfirmButton: false,\r\n              timer: 1500,\r\n            });\r\n\r\n            this.finalReportData = {};\r\n            this.$router.go(-1);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#add_final_report {\r\n  padding: 0px 5px 0px 5px;\r\n  margin: 0px 15px 0px 15px;\r\n}\r\n.box {\r\n  width: 100%;\r\n}\r\n\r\n.file_upload {\r\n  border: 1px solid #ccc;\r\n  width: 100%;\r\n  padding: 5px;\r\n  margin: 5px;\r\n  border-radius: 4px;\r\n}\r\n\r\nimg {\r\n  width: 20% !important;\r\n}\r\n\r\nselect {\r\n  width: 70%;\r\n  height: 38px;\r\n  box-shadow: 0 2px 1px 0 rgb(0 0 0 / 20%), 0 2px 15px 0 rgb(0 0 0 / 19%);\r\n  padding-left: 12px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  resize: vertical;\r\n}\r\n\r\n.add_row_btn {\r\n  background-color: yellowgreen;\r\n  color: white;\r\n  padding: 12px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  float: left;\r\n  margin-left: 5px;\r\n}\r\n\r\n.delete_row_btn {\r\n  background-color: red;\r\n  color: white;\r\n  padding: 12px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  float: right;\r\n  margin-left: 5px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}