{"ast":null,"code":"import { httpAuth } from \"../service/login_service\";\nimport { http } from \"../service/http_service\";\nexport const login = ({\n  dispatch\n}, data) => {\n  return httpAuth().post('/auth/v1/login', data).then(response => {\n    dispatch('attempt', response.data.access_token);\n    dispatch('setToken', response.data.access_token);\n    dispatch('setAdmin', response.data.user);\n  });\n};\nexport const attempt = ({\n  commit,\n  state\n}, token) => {\n  if (token) {\n    commit('SET_TOKEN', token);\n  }\n\n  if (!state.token) {\n    return;\n  }\n\n  try {\n    return httpAuth().post('/auth/v1/me').then(response => {\n      commit('SET_USER', response.data);\n    });\n  } catch (e) {\n    commit('SET_TOKEN', null);\n    commit('SET_USER', null);\n  }\n};\nexport const setToken = (_, token) => {\n  localStorage.setItem('token', token);\n};\nexport const setAdmin = (_, user) => {\n  localStorage.setItem('user', JSON.stringify(user));\n  localStorage.setItem('user_role', JSON.stringify(user[\"model_has_role\"][\"roles\"][\"name\"]));\n  localStorage.setItem('user_role_id', JSON.stringify(user[\"model_has_role\"][\"role_id\"]));\n  localStorage.setItem('user_reference', JSON.stringify(user[\"reference\"]));\n};\nexport const logout = ({\n  commit\n}) => {\n  return httpAuth().post('/auth/v1/logout').then(() => {\n    commit('SET_TOKEN', null);\n    commit('SET_USER', null);\n    localStorage.removeItem('user');\n    localStorage.removeItem('user_role');\n    localStorage.removeItem('user_role_id');\n    localStorage.removeItem('token');\n    localStorage.removeItem('user_reference');\n  });\n};\nexport const edit_user = ({\n  state\n}, id) => {\n  return httpAuth().post(`/auth/v1/edit_user/${id}`).then(res => {\n    state.edit_user_info = res.data.user;\n  });\n};\nexport const forget_password = ({\n  commit\n}, data) => {\n  return httpAuth().post('/auth/v1/forget_password', data).then(res => {\n    commit('FORGET_PASSWORD', res.data);\n  });\n};\nexport const change_password = ({\n  commit\n}, data) => {\n  return httpAuth().post('/auth/v1/change_password', data).then(res => {\n    commit('CHANGE_PASSWORD', res.data);\n  });\n};\nexport const admin_change_password = ({\n  commit\n}, data) => {\n  return http().post('v1/change_password', data).then(res => {\n    commit('ADMIN_CHANGE_PASSWORD', res.data);\n  });\n};\nexport const profile_update = ({\n  commit\n}, data) => {\n  return httpAuth().post('auth/v1/admin_profile_update', data).then(res => {\n    commit('ADMIN_PROFILE_UPDATE', res.data);\n  });\n};","map":{"version":3,"names":["httpAuth","http","login","dispatch","data","post","then","response","access_token","user","attempt","commit","state","token","e","setToken","_","localStorage","setItem","setAdmin","JSON","stringify","logout","removeItem","edit_user","id","res","edit_user_info","forget_password","change_password","admin_change_password","profile_update"],"sources":["C:/Users/pc/Documents/All_Project/InterportServices/frontend/src/store/actions.js"],"sourcesContent":["import { httpAuth } from \"../service/login_service\";\r\nimport { http } from \"../service/http_service\";\r\n\r\nexport const login = ({ dispatch }, data) => {\r\n    return httpAuth().post('/auth/v1/login', data).then((response) => {\r\n        dispatch('attempt', response.data.access_token);\r\n        dispatch('setToken', response.data.access_token);\r\n        dispatch('setAdmin', response.data.user);\r\n    });\r\n};\r\n\r\nexport const attempt = ({ commit, state }, token) => {\r\n    if (token) {\r\n        commit('SET_TOKEN', token);\r\n    }\r\n\r\n    if (!state.token) {\r\n        return\r\n    }\r\n\r\n    try {\r\n        return httpAuth().post('/auth/v1/me')\r\n            .then(response => {\r\n                commit('SET_USER', response.data);\r\n            });\r\n    } catch (e) {\r\n        commit('SET_TOKEN', null);\r\n        commit('SET_USER', null);\r\n    }\r\n};\r\n\r\nexport const setToken = (_, token) => {\r\n    localStorage.setItem('token', token);\r\n};\r\n\r\nexport const setAdmin = (_, user) => {\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    localStorage.setItem('user_role', JSON.stringify(user[\"model_has_role\"][\"roles\"][\"name\"]));\r\n    localStorage.setItem('user_role_id', JSON.stringify(user[\"model_has_role\"][\"role_id\"]));\r\n    localStorage.setItem('user_reference', JSON.stringify(user[\"reference\"]));\r\n};\r\n\r\nexport const logout = ({ commit }) => {\r\n\r\n    return httpAuth().post('/auth/v1/logout')\r\n        .then(() => {\r\n\r\n            commit('SET_TOKEN', null);\r\n            commit('SET_USER', null);\r\n\r\n            localStorage.removeItem('user');\r\n            localStorage.removeItem('user_role');\r\n            localStorage.removeItem('user_role_id');\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('user_reference');\r\n        });\r\n};\r\n\r\nexport const edit_user = ({ state }, id) => {\r\n    return httpAuth().post(`/auth/v1/edit_user/${id}`).then(res => {\r\n        state.edit_user_info = res.data.user;\r\n    })\r\n};\r\n\r\n\r\nexport const forget_password = ({ commit }, data) => {\r\n    return httpAuth().post('/auth/v1/forget_password', data).then(res => {\r\n        commit('FORGET_PASSWORD', res.data);\r\n    })\r\n};\r\n\r\nexport const change_password = ({ commit }, data) => {\r\n    return httpAuth().post('/auth/v1/change_password', data).then(res => {\r\n        commit('CHANGE_PASSWORD', res.data);\r\n    })\r\n};\r\n\r\nexport const admin_change_password = ({ commit }, data) => {\r\n    return http().post('v1/change_password', data).then(res => {\r\n        commit('ADMIN_CHANGE_PASSWORD', res.data);\r\n    })\r\n};\r\n\r\nexport const profile_update = ({ commit }, data) => {\r\n    return httpAuth().post('auth/v1/admin_profile_update', data).then(res => {\r\n        commit('ADMIN_PROFILE_UPDATE', res.data);\r\n    })\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}